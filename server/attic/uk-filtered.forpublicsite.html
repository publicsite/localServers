<!DOCTYPE html>
<html>
<head>
<title>RedAF</title>
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'>

<style>
.fixedbarwoo {
background: #000; 
bottom: 0px; 
color:#fff; 
font-family: Arial, Helvetica, sans-serif; 
left:0; 
padding: 0px 0; 
position:fixed; 
font-size:16px; 
width:100%; 
z-index:99999; 
float:left; 
vertical-align:middle; 
margin: 0px 0 0; 
opacity: 0.95; 
font-weight: bold;
}
</style>
<script>
function xmlhttpGet(strURL, tld) {
var newurl = 'https://api.allorigins.win/raw?' + 'nocache=' + Date.now() + '&' + 'url=';
    var xmlHttpReq = false;
    var self = this;
    if (window.XMLHttpRequest) { // Mozilla/Safari
        self.xmlHttpReq = new XMLHttpRequest();
    }
    else if (window.ActiveXObject) { // IE
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }
    self.xmlHttpReq.open('GET', newurl + strURL, false);
    self.xmlHttpReq.onload = function() {
        if (self.xmlHttpReq.status == 200) {
           var theText = self.xmlHttpReq.responseText;
           theText2 = theText.replace(/href="\//g, 'href="' + tld + '/');
window.frames[0].document.body.innerHTML = theText2;
var thebase = document.createElement("base");
thebase.target = "_blank";
window.frames[0].document.getElementsByTagName('head')[0].appendChild(thebase);
            //document.getElementById("theFrame").document.body.innerHTML = theText2;
        }
    }

    self.xmlHttpReq.send();
}

function xmlhttpGet2(strURL, tld) {
var newurl = 'https://api.allorigins.win/raw?' + 'nocache=' + Date.now() + '&' + 'url=';
    var xmlHttpReq = false;
    var self = this;
    if (window.XMLHttpRequest) { // Mozilla/Safari
        self.xmlHttpReq = new XMLHttpRequest();
    }
    else if (window.ActiveXObject) { // IE
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }
    self.xmlHttpReq.open('GET', newurl + strURL, false);
    self.xmlHttpReq.onload = function() {
        if (self.xmlHttpReq.status == 200) {
           var theText = self.xmlHttpReq.responseText;
           theText2 = theText.replace(/href="\//g, 'href="' + tld + '/');
var firstSplit = theText2.split('"accessibility":{"accessibilityData":{"label":"');

var theText3 = "";
for (var i=1; i < firstSplit.length; i+=5)
{

	//alert(firstSplit[i].split('"')[0]);
	var secondSplit = firstSplit[i+1].split('"commandMetadata":{"webCommandMetadata":{"url":"');
	//alert("https://www.youtube.com/" + secondSplit[1].split('"')[0]);
	var fourthSplit = firstSplit[i].split('"descriptionSnippet":{"runs":[{"text":"');
	//alert(fourthSplit[1].split('"')[0]);

	if (fourthSplit[1])
	theText3 = theText3 + '<a href="' + "https://www.youtube.com/" + secondSplit[1].split('"')[0] + '">' + firstSplit[i].split('"')[0] + '</a><br>' + fourthSplit[1].split('"')[0] + '<br><br>';
	else
	theText3 = theText3 + '<a href="' + "https://www.youtube.com/" + secondSplit[1].split('"')[0] + '">' + firstSplit[i].split('"')[0] + '</a><br>' + "(No Description)" + '<br><br>';
}
window.frames[0].document.body.innerHTML = theText3;

var thebase = document.createElement("base");
thebase.target = "_blank";
window.frames[0].document.getElementsByTagName('head')[0].appendChild(thebase);
            //document.getElementById("theFrame").document.body.innerHTML = theText2;
        }
    }

    self.xmlHttpReq.send();
}

function xmlRSSGet(strURL, tld) {
var newurl = 'https://api.allorigins.win/raw?' + 'nocache=' + Date.now() + '&' + 'url=';
    var xmlHttpReq = false;
    var self = this;
    if (window.XMLHttpRequest) { // Mozilla/Safari
        self.xmlHttpReq = new XMLHttpRequest();
    }
    else if (window.ActiveXObject) { // IE
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }
    self.xmlHttpReq.open('GET', newurl + strURL, false);
    self.xmlHttpReq.onload = function() {
        if (self.xmlHttpReq.status == 200) {
    var xmlDoc = self.xmlHttpReq.responseXML;
theHTML="<html><head><base target=\"_blank\"></head><center>"
for(var index = 0; index < xmlDoc.getElementsByTagName("entry").length; index++)
{
var parser = new DOMParser;
var dom = parser.parseFromString(
    '<!doctype html><body>' + xmlDoc.getElementsByTagName("entry")[index].querySelector("content").innerHTML,
    'text/html');
var articleLink = dom.body.textContent.split("<span>")[1].match(new RegExp("href=\"" + "(.*)" + "\">"))[1];
articleLink=articleLink.replace('www.reddit.com/r/','l.opnxng.com/r/');
articleLink=articleLink.replace('reddit.com/r/','l.opnxng.com/r/');
//awoo
articleLink=articleLink.replace('https://www.thetimes.com','https://archive.ph/https://www.thetimes.com');
articleLink=articleLink.replace('http://www.thetimes.com','https://archive.ph/http://www.thetimes.com');
articleLink=articleLink.replace('https://thetimes.com','https://archive.ph/https://thetimes.com');
articleLink=articleLink.replace('http://thetimes.com','https://archive.ph/http://thetimes.com');
articleLink=articleLink.replace('https://www.reuters.com','https://www.neuters.de');
articleLink=articleLink.replace('http://www.reuters.com','http://www.neuters.de');
articleLink=articleLink.replace('https://reuters.com','https://neuters.de');
articleLink=articleLink.replace('http://reuters.com','http://neuters.de');
articleLink=articleLink.replace('https://www.ft.com','https://archive.ph/https://www.ft.com');
articleLink=articleLink.replace('http://www.ft.com','https://archive.ph/http://www.ft.com');
articleLink=articleLink.replace('https://ft.com','https://archive.ph/https://ft.com');
articleLink=articleLink.replace('http://ft.com','https://archive.ph/http://ft.com');

			var thetitle=xmlDoc.getElementsByTagName("entry")[index].getElementsByTagName("title")[0].childNodes[0].nodeValue;
			var pass=false;

alert(thetitle);

					//check the title

					if (thetitle.match("Oil") != null)
						pass=true;
					else if (thetitle.match("oil") != null)
						pass=true;
					else if (thetitle.match("Coal") != null)
						pass=true;
					else if (thetitle.match("coal") != null)
						pass=true;
					else if (thetitle.match("Nuclear") != null)
						pass=true;
					else if (thetitle.match("nuclear") != null)
						pass=true;
					else if (thetitle.match("Submarine") != null)
						pass=true;
					else if (thetitle.match("submarine") != null)
						pass=true;
					else if (thetitle.match("Royal Navy Fleet") != null)
						pass=true;
					else if (thetitle.match("Royal Navy fleet") != null)
						pass=true;
					else if (thetitle.match("Challenger 3") != null)
						pass=true;
					else if (thetitle.match("onsumption room") != null)
						pass=true;
					else if (thetitle.match("onsumption Room") != null)
						pass=true;
					else if (thetitle.match("njection site") != null)
						pass=true;
					else if (thetitle.match("njection Site") != null)
						pass=true;
					else if (thetitle.match("petrol") != null)
						pass=true;
					else if (thetitle.match("Petrol") != null)
						pass=true;
					else if (thetitle.match("OPEC") != null)
						pass=true;
					else if (thetitle.match("Natural Gas") != null)
						pass=true;
					else if (thetitle.match("natural gas") != null)
						pass=true;
					else if (thetitle.match("Wheat") != null)
						pass=true;
					else if (thetitle.match("wheat") != null)
						pass=true;
					else if (thetitle.match("Grain") != null)
						pass=true;
					else if (thetitle.match("grain") != null)
						pass=true;
					else if (thetitle.match("Inflation") != null)
						pass=true;
					else if (thetitle.match("inflation") != null)
						pass=true;
					else if (thetitle.match("Supply-Chain") != null)
						pass=true;
					else if (thetitle.match("supply-chain") != null)
						pass=true;
					else if (thetitle.match("Supply Chain") != null)
						pass=true;
					else if (thetitle.match("supply chain") != null)
						pass=true;
					else if (thetitle.match("Consumer Confidence") != null)
						pass=true;
					else if (thetitle.match("consumer confidence") != null)
						pass=true;
					else if (thetitle.match("Demand") != null)
						pass=true;
					else if (thetitle.match("demand") != null)
						pass=true;
					else if (thetitle.match("Consumer Price Index") != null)
						pass=true;
					else if (thetitle.match("consumer price index") != null)
						pass=true;
					else if (thetitle.match("CPI") != null)
						pass=true;
					else if (thetitle.match("Underground") != null)
						pass=true;
					else if (thetitle.match("underground") != null)
						pass=true;
					else if (thetitle.match("Tunnel") != null)
						pass=true;
					else if (thetitle.match("tunnel") != null)
						pass=true;
					else if (thetitle.match("Trench") != null)
						pass=true;
					else if (thetitle.match("trench") != null)
						pass=true;
					else if (thetitle.match("NHS") != null)
						pass=true;
					else if (thetitle.match("Dentist") != null)
						pass=true;
					else if (thetitle.match("dentist") != null)
						pass=true;
					else if (thetitle.match("Private Healthcare") != null)
						pass=true;
					else if (thetitle.match("private healthcare") != null)
						pass=true;
					else if (thetitle.match("Shipping") != null)
						pass=true;
					else if (thetitle.match("shipping") != null)
						pass=true;
					else if (thetitle.match("Dover") != null)
						pass=true;
					else if (thetitle.match("Airlines") != null)
						pass=true;
					else if (thetitle.match("airlines") != null)
						pass=true;
					else if (thetitle.match("Flights") != null)
						pass=true;
					else if (thetitle.match("flights") != null)
						pass=true;
					else if (thetitle.match("Backlog") != null)
						pass=true;
					else if (thetitle.match("backlog") != null)
						pass=true;
					else if (thetitle.match("Stagflation") != null)
						pass=true;
					else if (thetitle.match("stagflation") != null)
						pass=true;
					else if (thetitle.match("Sanctions") != null)
						pass=true;
					else if (thetitle.match("sanctions") != null)
						pass=true;
					else if (thetitle.match("Seafood") != null)
						pass=true;
					else if (thetitle.match("seafood") != null)
						pass=true;
					else if (thetitle.match("Environment") != null)
						pass=true;
					else if (thetitle.match("environment") != null)
						pass=true;
					else if (thetitle.match("Ammunition") != null)
						pass=true;
					else if (thetitle.match("ammunition") != null)
						pass=true;
					else if (thetitle.match("ighter Jet") != null)
						pass=true;
					else if (thetitle.match("ighter jet") != null)
						pass=true;
					else if (thetitle.match("ighter Plane") != null)
						pass=true;
					else if (thetitle.match("ighter plane") != null)
						pass=true;


					//eliminate rage bait - check the title
					if (thetitle.match("Trans") != null)
						pass=false;
					else if (thetitle.match("trans") != null)
						pass=false;
					else if (thetitle.match("gender") != null)
						pass=false;
					else if (thetitle.match("Gender") != null)
						pass=false;
					else if (thetitle.match("single-sex") != null)
						pass=false;
					else if (thetitle.match("Muslim") != null)
						pass=false;
					else if (thetitle.match("Islamist") != null)
						pass=false;
					else if (thetitle.match("islamist") != null)
						pass=false;
					else if (thetitle.match("Stabbed") != null)
						pass=false;
					else if (thetitle.match("stabbed") != null)
						pass=false;
					else if (thetitle.match("Punched") != null)
						pass=false;
					else if (thetitle.match("punched") != null)
						pass=false;
					else if (thetitle.match("Kicked") != null)
						pass=false;
					else if (thetitle.match("kicked") != null)
						pass=false;
					else if (thetitle.match("Islamic") != null)
						pass=false;
					else if (thetitle.match("semitism") != null)
						pass=false;
					else if (thetitle.match("semitic") != null)
						pass=false;
					else if (thetitle.match("Farage") != null)
						pass=false;
					else if (thetitle.match("attack") != null)
						pass=false;
					else if (thetitle.match("Attack") != null)
						pass=false;
					else if (thetitle.match("definition of a woman") != null)
						pass=false;
					else if (thetitle.match("sex") != null)
						pass=false;
					else if (thetitle.match("Sex") != null)
						pass=false;
					else if (thetitle.match("mall boat") != null)
						pass=false;
					else if (thetitle.match("mall Boat") != null)
						pass=false;
					else if (thetitle.match("hit-and-run") != null)
						pass=false;
					else if (thetitle.match("hit and run") != null)
						pass=false;
					else if (thetitle.match("Hit and Run") != null)
						pass=false;
					else if (thetitle.match("car crash") != null)
						pass=false;
					else if (thetitle.match("Car Crash") != null)
						pass=false;
					else if (thetitle.match("rooming") != null)
						pass=false;
					else if (thetitle.match("roomed") != null)
						pass=false;
					else if (thetitle.match("Migrant") != null)
						pass=false;
					else if (thetitle.match("igrant") != null)
						pass=false;
					else if (thetitle.match("Jew") != null)
						pass=false;

	if (pass == true)
	{

		theHTML = theHTML + "<a href=\"" + articleLink + "\" style=\"color:green\" \">" + xmlDoc.getElementsByTagName("entry")[index].getElementsByTagName("title")[0].childNodes[0].nodeValue + "</a>";

		commentLink=xmlDoc.getElementsByTagName("entry")[index].querySelector("link").getAttribute("href").replace('www.reddit.com/r/','l.opnxng.com/r/');
		commentLink=commentLink.replace('reddit.com/r/','l.opnxng.com/r/');
		theHTML = theHTML + "<br><a href=\"" + commentLink + "\" style=\"color:green\"\">Comments</a>" + "<br><br>";
	}
}
theHTML = theHTML + "</center></html>"
window.frames[0].document.body.innerHTML = theHTML;

            //document.getElementById("theFrame").document.body.innerHTML = theText2;
        }
    }

    self.xmlHttpReq.send();
}

function xmlRSSGet2(strURL, tld) {
var newurl = 'https://api.allorigins.win/raw?' + 'nocache=' + Date.now() + '&' + 'url=';
    var xmlHttpReq = false;
    var self = this;
    if (window.XMLHttpRequest) { // Mozilla/Safari
        self.xmlHttpReq = new XMLHttpRequest();
    }
    else if (window.ActiveXObject) { // IE
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }
    self.xmlHttpReq.open('GET', newurl + strURL, false);
    self.xmlHttpReq.onload = function() {
        if (self.xmlHttpReq.status == 200) {
    var xmlDoc = self.xmlHttpReq.responseXML;
theHTML="<html><head><base target=\"_blank\"></head><center>"
for(var index = 0; index < xmlDoc.getElementsByTagName("item").length; index++)
{
var thelink = xmlDoc.getElementsByTagName("item")[index].querySelector("link").innerHTML.replace("<![CDATA[", "").replace("]]>", "");
var thetitle = xmlDoc.getElementsByTagName("item")[index].querySelector("title").innerHTML.replace("<![CDATA[", "").replace("]]>", "");
theHTML = theHTML + "<a href=\"http://webcache.googleusercontent.com/search?q=cache:" + thelink + "&strip=1&vwsrc=0" + "\">" + thetitle + "</a>" + "<br><br>";
}
theHTML = theHTML + "</center></html>"
window.frames[0].document.body.innerHTML = theHTML;

       }
    }

    self.xmlHttpReq.send();
}

function showBBC(){
xmlhttpGet("http://www.bbc.co.uk", "http://www.bbc.co.uk");
}

function showGuardian(){
xmlhttpGet("https://www.theguardian.com/uk", "https://www.theguardian.com");
}

function showI(){
xmlhttpGet("https://inews.co.uk/category/news/uk", "https://inews.co.uk");
}

function showIndependent(){
xmlhttpGet("https://www.independent.co.uk/news/uk", "https://www.independent.co.uk");
}


function showPositive(){
xmlhttpGet("https://www.positive.news", "https://www.positive.news");
}

function showHuffPost(){
xmlRSSGet2("https://www.huffingtonpost.co.uk/feeds/verticals/uk/index.xml", "https://www.huffingtonpost.co.uk/feeds/verticals/uk/index.xml");
}

function showReddit(){

const queryString = window.location.search;

const urlParams = new URLSearchParams(queryString);

const subreddit = "ukpolitics";

const hotornew = urlParams.get('t');

	if (hotornew == "new"){

		document.getElementById("hot").checked = false;
		document.getElementById("new").checked = true;
		if (subreddit == "" || subreddit == null){
			xmlRSSGet("https://www.reddit.com/new.rss", "https://old.reddit.com/new.rss");	
		}
		else
		{
			xmlRSSGet("https://www.reddit.com/r/" + subreddit + "/new.rss", "https://old.reddit.com/r/" + subreddit + "/new.rss");
		}
	}
	else
	{
		document.getElementById("hot").checked = true;
		document.getElementById("new").checked = false;
		if (subreddit == "" || subreddit == null){
			xmlRSSGet("https://www.reddit.com/.rss", "https://old.reddit.com/.rss");	
		}
		else
		{
			xmlRSSGet("https://www.reddit.com/r/" + subreddit + ".rss", "https://old.reddit.com/r/" + subreddit + ".rss");
		}
	}

}

function showYTTrending(){
xmlhttpGet2("https://m.youtube.com/feed/trending?persist_app=1&app=m", "https://m.youtube.com");
}

function doaredirect(hotornewParam){

	const queryString = window.location.search;

	const urlParams = new URLSearchParams(queryString);

	const hotornew = urlParams.get('t');

	if (hotornewParam == "")
	{
		if (hotornew != ""){
			hotornewParam=hotornew;
		}
		else
		{
			hotornewParam="hot";
		}
	}

	if (hotornewParam == "new")
	{
		window.location.href = window.location.href.split("?")[0] + "?r=" + "ukpolitics" + "&t=new";
	}
	else
	{
		window.location.href = window.location.href.split("?")[0] + "?r=" + "ukpolitics" + "&t=hot";
		
	}
}


</script>
</head>
<body bgcolor="black" onload='showReddit()'>
<center>
<p style="color:blue">
<input type="radio" id="hot" onclick='doaredirect("hot")' checked="true">hot</input>
<input type="radio" id="new" onclick='doaredirect("new")' checked="false">new</input>
</p>
</center>
<iframe id="theFrame" style="position: absolute; width: 99%; height: 100%; border: none"></div>
</table>
</body>
</html>
